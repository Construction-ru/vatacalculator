# Программа vatacalculator (Ватакалькулятор)
Программа рассчитывает оптимальную толщину теплоизоляции из расчёта на то, что общая сумма издержек на строительство дома и на отопление должна быть минимизирована с учётом дисконтирования затрат и затрат на кредит.
Расчёт приблизительный.

## Установка

### Microsoft .NET Core
Для работы программы нужна установленная ".NET Core 3.1". Взять её можно с сайта Microsoft: https://dotnet.microsoft.com/download/dotnet-core . На странице закачки нужно выбрать ".NET Core Runtime" либо "Desktop Runtime".

### Дистрибутив программы
Взять архив с программой можно из меню Releases в правой части страницы (https://github.com/Construction-ru/vatacalculator/releases).
Установки программа не требует (если уже есть .NET Core).
Просто распакуйте архив (архиватор https://www.7-zip.org/ ) с исполняемыми файлами и запустите их. Не распаковывайте в "Program Files", т.к. там могут быть проблемы с запуском (нужно распаковывать в любую вашу папку).


## Запуск
Просто запустите программу, если вы под Windows. Под остальными ОС см. справку по .NET Core

Для обеспечения простой кроссплатформенности программа сделана консольной. То есть без обычного окна, так что она не очень удобная.
После запуска программы следуйте дальнейшим появляющимся инструкциям.

Например, нажатие на клавишу "1" и "Enter" приведёт вас в меню расчётов. Там вы можете выбрать один из файлов с параметрами для расчётов: чтобы что-то расчитать надо сначала создать файл расчётов (с программой поставляются примеры готовых файлов с очень приблизительными характеристиками реальных материалов - не используйте эти примеры для реальных расчётов).

Для примера, чтобы выбрать файл с приблизительными параметрами полистиролбетона нужно прокрутить список до него. Для прокрутки списка нажмите клавишу Enter, после этого вы увидите что-нибудь типа "07. example3-stirolbeton.txt" с дальнейшими комментариями "Пример: полистиролбетон D500".


Мы видим, что рядом с именем файла написано "07. ". Значит, для выбора этой позиции нужно ввести цифру "7" и нажать на Enter.

Далее вы попадёте в меню выбора климатических условий. Меню действует аналогично.

Например, "00. 0 moscow-VDNH-m.txt" сопровождается надписью "Москва" "Станция ВДНХ". Значит, для выбора этого климата нужно нажать на "0" и потом на Enter.

Чтобы выбрать Киев нужно пролистать список до Киева - а значит, нужно нажать на Enter, чтобы программа выдала новую порцию списка.
Допустим, Киев у нас "07. 9 kiev.txt" с пояснением "Киев". Значит нужно нажать на "7" (и потом тоже на Enter). Если вы заранее знаете, что Киев будет под 7-ым номером - то вы можете сразу нажать "7" - не пролистывая список.

После выбора климата будет произведён расчёт (очень быстро должно быть) и выведен результат.

Например, "Оптимальная толщина выбранного вида теплоизоляции 69 миллиметров".

Дополнительную информацию по проведённому расчёту вы можете посмотреть в файле, который располагается в папке "results", которая находится в папке программы.

## Создание нового расчёта
Для создания нового расчёта вы можете воспользоваться пунктом главного меню 2. Либо просто скопировать файл расчёта из папки "data" и изменить параметры так, как вам надо.

Файлы материалов, которые идут вместе с программой, являются очень приблизительными. Для расчёта конкретного материала найдите коэффициент теплопроводности данного материала (не идеальный, а для условий эксплуатации, в зависимости от влажности), а также вручную рассчитайте приблизительную стоимость конкретного выбранного вами материала и его монтажа. После этого введите все эти параметры в файл расчёта. Тогда расчёт будет более точным.

## Небольшие экономические комментарии

У программы довольно простая математическая модель, не ждите ничего особенного.
Как и любые современные экономические расчёты, программа подразумевает, что вы всё берёте в кредит. Даже если вы не берёте в кредит, вы могли бы взять в кредит или вложить деньги в бизнес. Поэтому все расчёты работают исходя из формулы сложных процентов.

В программе есть две процентных ставки: кредит по дому ("Кредитная ставка") и кредит на электроэнергию ("Дисконтирование электроэнергии").
Обычно дом действительно берут в кредит, в то время как электроэнергия выплачивается из наличных средств. Поэтому процентная ставка на эл. энергию может быть сильно меньше, чем процентная ставка на дом. Процент дисконтирования цены электроэнергии связан с тем, что вы эти деньги могли дать кому-то в долг и заработать на этом, а не просто потратить на оплату отопления.
Кредит имеет свой срок. Сначала деньги считаются по стоимости кредита (ставка дисконтирования не влияет), потом по ставке дисконтирования до истечения срока службы теплоизоляции.

Программа рассчитывает тепловой поток через квадратный метр теплоизоляции, домножает на сложные проценты по кредиту и всё суммирует. Сумма выплат по кредиту за дом и по кредиту за электроэнергию должна быть минимальной - тогда это и есть лучшая теплоизоляция. Программа находит значение теплоизоляции, при котором такая сумма минимальна простым перебором.

### Результат сильно зависит от процентных ставок
Обратите внимание, как сильно меняются результаты в зависимости от процентных ставок. Вы можете выбрать для наблюдения за тем, как меняется оптимальная толщина в зависимости от процентной ставки на заранее подготовленных файлах example0-0, example0-4-20 и т.п. - у них одинаково всё, кроме процентных ставок. Аналогично для файлов stirolbeton-*.txt

Разница в толщинах может быть порядка 1,5 раз только за счёт процентной ставки и срока кредита.

## Результат работы
Программа выводит оптимальную толщину изоляции на консоль после расчёта.
Также, она создаёт файл, в котором дополнительно приводит некоторые данные.

## Настройки расчёта
Сделать свой файл расчёта можно либо через меню программы, либо скопировав один файлов из папки "data" (в папке программы) и изменив в текстовом редакторе нужные значения.
Например, изменение строки ниже строки "ДисконтированиеЭлектроэнергии" даст изменение процентной ставки для дисконтирования электоэнергии.
Изменение строки ниже строки "КредитнаяСтавка" даст изменение процентной ставки.

## Сообщения об ошибках
Вы можете связаться через вкладку Issues ( https://github.com/Construction-ru/vatacalculator/issues ) на странице репозитория.
Либо см. контакты на сайте https://consp11.github.io/

### Благодарности
Благодарю Глеба Гринфелда http://glebgrin.ru/ за ссылки на статьи по теме, которые помогли исправить неверный расчёт кредита.
Ссылки по теме: http://stroy-profi.info/files/pdf/21/stroyprofi-21-30.pdf , https://cyberleninka.ru/article/n/perspektivy-povysheniya-energeticheskoy-effektivnosti-zhilyh-zdaniy-v-rossii-1/viewer
